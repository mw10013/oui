{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "oui-field",
  "type": "registry:ui",
  "title": "Field",
  "description": "React aria components for fields with shadcn characteristics.",
  "dependencies": [
    "react-aria-components"
  ],
  "registryDependencies": [
    "@oui/oui-label"
  ],
  "files": [
    {
      "path": "registry/default/ui/oui-field.tsx",
      "content": "\"use client\";\n\nimport type { VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { Label } from \"@/registry/default/ui/oui-label\";\nimport { cva } from \"class-variance-authority\";\nimport * as Rac from \"react-aria-components\";\nimport { twJoin, twMerge } from \"tailwind-merge\";\nimport { composeTailwindRenderProps } from \"./oui-base\";\n\n/**\n * Derived from shadcn Field.\n */\nexport const fieldStyles = cva(\n  \"group/field flex w-full gap-3 data-invalid:text-destructive\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col *:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"*:data-[slot=field-label]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n        responsive: [\n          \"flex-col *:w-full @md/field-group:flex-row @md/field-group:items-center @md/field-group:*:w-auto [&>.sr-only]:w-auto\",\n          \"@md/field-group:*:data-[slot=field-label]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  },\n);\n\nexport type FieldStylesProps = VariantProps<typeof fieldStyles>;\n\n/**\n * FieldLabel\n * Derived from shadcn FieldLabel.\n */\nexport function FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={twJoin(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-disabled/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border *:data-[slot=field]:p-4\",\n        \"has-data-selected:border-primary has-data-selected:bg-primary/5 dark:has-data-selected:bg-primary/10\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\n/**\n * FieldDescription\n * Derived from shadcn FieldDescription in field.tsx\n */\nexport function FieldDescription({ className, ...props }: Rac.TextProps) {\n  return (\n    <Rac.Text\n      slot=\"description\"\n      data-slot=\"field-description\"\n      elementType=\"p\"\n      className={twMerge(\n        \"text-sm leading-normal font-normal text-muted-foreground group-has-data-[orientation=horizontal]/field:text-balance\",\n        // shadcn uses `last:mt-0` which misses with RAC `aria-hidden` so we add `[&:has(+[aria-hidden])]:mt-0` as well.\n        // shadcn uses `nth-last-2:-mt-1` which breaks with RAC `aria-hidden` so we use `[&:has(+[data-slot=field-error])]:-mt-1` instead.\n        \"last:mt-0 [&:has(+[aria-hidden])]:mt-0 [&:has(+[data-slot=field-error])]:-mt-1 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a]:underline [&>a]:underline-offset-4 [&>a:hover]:text-primary\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport function FieldError({\n  className,\n  children,\n  ...props\n}: Rac.FieldErrorProps) {\n  // https://github.com/adobe/react-spectrum/issues/7525\n  return (\n    <Rac.TextContext.Provider value={{ elementType: \"div\" }}>\n      <Rac.FieldError\n        data-slot=\"field-error\"\n        className={composeTailwindRenderProps(\n          className,\n          \"text-sm font-normal text-destructive\",\n        )}\n        {...props}\n      >\n        {(renderProps) =>\n          children ? (\n            typeof children === \"function\" ? (\n              children(renderProps)\n            ) : (\n              children\n            )\n          ) : renderProps.isInvalid ? (\n            renderProps.validationErrors.length === 1 ? (\n              renderProps.validationErrors[0]\n            ) : (\n              <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n                {renderProps.validationErrors.map((error, index) => (\n                  <li key={index}>{error}</li>\n                ))}\n              </ul>\n            )\n          ) : null\n        }\n      </Rac.FieldError>\n    </Rac.TextContext.Provider>\n  );\n}\n\n/* shadcn FieldError\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors?.length) {\n      return null\n    }\n\n    const uniqueErrors = [\n      ...new Map(errors.map((error) => [error?.message, error])).values(),\n    ]\n\n    if (uniqueErrors?.length == 1) {\n      return uniqueErrors[0]?.message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {uniqueErrors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n*/\n",
      "type": "registry:ui"
    }
  ],
  "meta": {
    "tags": [
      "field"
    ]
  }
}